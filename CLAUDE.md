# CLAUDE.md

本文件为 Claude Code (claude.ai/code) 在此代码库中工作时提供指导。

## 项目概览

这是一个英语词汇学习游戏项目，包含两个基于HTML的互动游戏，旨在通过游戏化的方式帮助中国学生学习英语单词。项目包含两个不同的游戏实现：

1. **摸金背单词 (index.html)** - 以洞穴探宝为主题的词汇学习游戏，玩家通过正确发音英语单词来发现宝藏
2. **挖宝背单词 (treasure-digger.html)** - 挖掘模拟游戏，玩家挖掘埋藏的代表英语词汇的宝藏

## 架构设计

两个游戏都是单文件HTML应用程序，内嵌CSS和JavaScript，遵循相似的架构模式：

### 核心游戏系统

- **词汇数据库**：两个游戏都使用UNIT_TREASURES结构，按教学单元组织（Unit 1-9），代表不同的词汇主题（问候、家庭、数字、颜色、学科等）
- **游戏状态管理**：JavaScript对象跟踪玩家进度、金币、背包、工具和学习进度
- **音频系统**：集成Web Audio API处理音效，Text-to-Speech API处理发音
- **语音识别**：Web Speech API用于基于语音的词汇练习

### 核心组件

**摸金背单词系统**：
- 基于单元的学习进度和完成度跟踪
- 商店系统，用于购买道具和提示
- 统计数据跟踪（金币、等级、发现的宝藏）
- 基于模态框的单词练习学习界面

**挖宝背单词系统**：
- 基于工具的进度系统（铁锤、镐子、钻头、魔法杖）
- 辅助工具系统（探测器、市场内幕、幸运符）
- 消耗品道具（能量饮料）
- 出售发现宝藏的市场系统

### 词汇结构

每个单词条目包含：
- `name`: 英语单词
- `ipa`: IPA音标
- `desc`: 中文描述/含义
- `value`: 游戏币价值
- `icon`: 表情符号表示

## 通用开发模式

两个游戏实现了相似的模式：

- **音频上下文初始化**：需要用户交互才能播放音频
- **模态框系统**：用于单词学习、商店、背包的覆盖对话框
- **进度持久化**：游戏状态存储在JavaScript对象中（无后端持久化）
- **响应式设计**：通过媒体查询实现的移动端友好布局
- **动画系统**：使用CSS关键帧动画提供游戏反馈

## 浏览器兼容性

游戏需要现代浏览器功能：
- Web Speech API（语音识别）
- Web Audio API（音效）
- Speech Synthesis API（发音）
- ES6 JavaScript特性

在这些功能不可用时实现了优雅降级。

## 教学框架

游戏基于人教版七年级英语课程的9个单元结构：
- Unit 1: 初次相遇/问候
- Unit 2: 家庭成员
- Unit 3: 数字
- Unit 4: 颜色
- Unit 5: 学校科目
- Unit 6: 时间/日历
- Unit 7: 服装
- Unit 8: 食物
- Unit 9: 星期

这种课程对齐确保词汇与中国学生的正式英语教育相匹配。

## 开发注意事项

- 两个游戏都没有构建过程，直接在浏览器中打开HTML文件即可运行
- 游戏状态仅存储在内存中，刷新页面会重置进度
- 语音识别功能需要HTTPS环境或localhost才能正常工作
- 音频播放需要用户首次交互后才能启动（浏览器安全策略）